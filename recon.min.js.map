{"version":3,"sources":["recon.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","recon","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"parse","string","input","StringIterator","result","DocumentParser","run","state","stringify","value","options","writer","ReconWriter","block","writeValue","writeBlock","base64","undefined","Uint8Array","data","DataBuilder","cs","isEmpty","appendBase64Char","head","step","isRecord","item","Array","isArray","isObject","isField","isAttr","keys","Object","key","charCodeAt","isBlockSafe","record","isMarkupSafe","coerce","arguments","coerceValue","coerceRecord","coerceObject","items","push","isNaN","parseInt","set","fields","field","defineProperty","enumerable","configurable","writable","concat","x","y","builder","RecordBuilder","appendRecord","appendItem","equal","equalRecord","equalFields","equalData","xKeys","yKeys","get","$key","$value","setRecord","setObject","updated","ValueBuilder","index","StringIteratee","StringBuilder","isSpace","c","isNewline","isWhitespace","isNameStartChar","isNameChar","isBase64Char","BlockParser","AttrParser","ident","BlockValueParser","InlineValueParser","RecordParser","MarkupParser","text","IdentParser","StringParser","NumberParser","DataParser","prototype","appendFields","appendValue","appendField","isDone","c1","c2","Done","create","isCont","isError","feed","next","constructor","error","unexpectedEOF","append","String","fromCharCode","appendString","prepare","size","expand","base","Math","max","aliased","buffer","array","appendByte","offset","decodeBase64Digit","decodeBase64Quantum","p","q","z","w","subarray","found","expected","Number","writeRecord","writeText","writeNumber","writeBool","writeData","writeItem","writeSlots","writeAttrs","attrs","writeAttr","substring","writeIdent","slots","writeSlot","writeItems","inBlock","inMarkup","inBraces","inBrackets","first","writeMarkupText","isIdent","writeString","number","toString","bool","encodeBase64Digit","apply"],"mappings":"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","file":"recon.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.recon = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nfunction parse(string) {\n  var input = new StringIterator(string);\n  var result = new DocumentParser().run(input);\n  return result.state();\n}\n\nfunction stringify(value, options) {\n  var writer = new ReconWriter();\n  if (options && options.block === false) writer.writeValue(value);\n  else writer.writeBlock(value);\n  return writer.state();\n}\n\nfunction base64(string) {\n  if (string === undefined) return new Uint8Array(0);\n  var data = new DataBuilder();\n  var cs = new StringIterator(string);\n  while (!cs.isEmpty()) {\n    data.appendBase64Char(cs.head());\n    cs.step();\n  }\n  return data.state();\n}\n\nfunction isRecord(item) {\n  return Array.isArray(item);\n}\n\nfunction isObject(item) {\n  return item !== null && typeof item === 'object' && !(item instanceof Uint8Array);\n}\n\nfunction isField(item) {\n  return item !== null && typeof item === 'object' && !Array.isArray(item);\n}\n\nfunction isAttr(item) {\n  if (!isField(item)) return false;\n  var keys = Object.keys(item);\n  var n = keys.length;\n  if (n === 0) return false;\n  for (var i = 0; i < n; i += 1) {\n    var key = keys[i];\n    if (key.length === 0 || key.charCodeAt(0) !== 64/*'@'*/) return false;\n  }\n  return true;\n}\n\nfunction isBlockSafe(record) {\n  for (var i = 0, n = record.length; i < n; i += 1) {\n    if (isAttr(record[i])) return false;\n  }\n  return true;\n}\n\nfunction isMarkupSafe(record) {\n  var n = record.length;\n  if (n === 0 || !isAttr(record[0])) return false;\n  for (var i = 1; i < n; i += 1) {\n    if (isAttr(record[i])) return false;\n  }\n  return true;\n}\n\nfunction coerce() {\n  if (arguments.length === 1) return coerceValue(arguments[0]);\n  else if (arguments.length > 1) return coerceRecord(arguments);\n}\nfunction coerceValue(value) {\n  if (isRecord(value)) return coerceRecord(value);\n  else if (isObject(value)) return coerceObject(value);\n  else return value;\n}\nfunction coerceRecord(items) {\n  var record = [];\n  var i, n;\n  for (i = 0, n = items.length; i < n; i += 1) {\n    record.push(items[i]);\n  }\n  var keys = Object.keys(items);\n  for (i = 0, n = keys.length; i < n; i += 1) {\n    var key = keys[i];\n    if (isNaN(parseInt(key))) {\n      var value = record[key];\n      set(record, key, value);\n    }\n  }\n  return record;\n}\nfunction coerceObject(fields) {\n  var keys = Object.keys(fields);\n  var n = keys.length;\n  var record = new Array(n);\n  for (var i = 0; i < n; i += 1) {\n    var key = keys[i];\n    var value = fields[key];\n    var field = {};\n    field[key] = value;\n    record[i] = field;\n    Object.defineProperty(record, key, {\n      value: value,\n      enumerable: false,\n      configurable: true,\n      writable: true});\n  }\n  return record;\n}\n\nfunction concat(x, y) {\n  var builder = new RecordBuilder();\n  if (isRecord(x)) builder.appendRecord(x);\n  else builder.appendItem(x);\n  if (isRecord(y)) builder.appendRecord(y);\n  else builder.appendItem(y);\n  return builder.state();\n}\n\nfunction equal(x, y) {\n  if (x === y) return true;\n  if (isRecord(x) && isRecord(y)) return equalRecord(x, y);\n  if (isField(x) && isField(y)) return equalFields(x, y);\n  if (x instanceof Uint8Array && y instanceof Uint8Array) return equalData(x, y);\n  return false;\n}\nfunction equalRecord(x, y) {\n  var n = x.length;\n  if (n !== y.length) return false;\n  for (var i = 0; i < n; i += 1) {\n    if (!equal(x[i], y[i])) return false;\n  }\n  return true;\n}\nfunction equalFields(x, y) {\n  var xKeys = Object.keys(x);\n  var yKeys = Object.keys(y);\n  var n = xKeys.length;\n  if (n !== yKeys.length) return false;\n  for (var i = 0; i < n; i += 1) {\n    var key = xKeys[i];\n    if (!equal(x[key], y[key])) return false;\n  }\n  return true;\n}\nfunction equalData(x, y) {\n  var n = x.length;\n  if (n !== y.length) return false;\n  for (var i = 0; i < n; i += 1) {\n    if (x[i] !== y[i]) return false;\n  }\n  return true;\n}\n\nfunction get(record, key) {\n  var i, n, item, value;\n  if (typeof key === 'string') {\n    value = record[key];\n    if (value !== undefined) return value;\n    for (i = 0, n = record.length; i < n; i += 1) {\n      item = record[i];\n      if (isObject(item)) {\n        if (item[key] !== undefined) return item[key];\n        else if (equal(item.$key, key)) return item.$value;\n      }\n    }\n  }\n  else {\n    for (i = 0, n = record.length; i < n; i += 1) {\n      item = record[i];\n      if (isObject(item)) {\n        if (equal(item.$key, key)) return item.$value;\n      }\n    }\n  }\n}\n\nfunction set(record, key, value) {\n  if (isRecord(record)) setRecord(record, key, value);\n  else if (isObject(record)) setObject(record, key, value);\n}\nfunction setRecord(record, key, value) {\n  var updated = false;\n  var field;\n  for (var i = 0, n = record.length; i < n; i += 1) {\n    var item = record[i];\n    if (isObject(item)) {\n      if (item[key] !== undefined) {\n        item[key] = value;\n        updated = true;\n      }\n      else if (equal(item.$key, key)) {\n        item.$value = value;\n        updated = true;\n      }\n    }\n  }\n  if (typeof key === 'string') {\n    if (!updated) {\n      field = {};\n      field[key] = value;\n      record.push(field);\n    }\n    Object.defineProperty(record, key, {\n      value: value,\n      enumerable: false,\n      configurable: true,\n      writable: true});\n  }\n  else if (!updated) {\n    field = {};\n    field.$key = key;\n    field.$value = value;\n    record.push(field);\n  }\n}\nfunction setObject(record, key, value) {\n  if (typeof key === 'string') {\n    record[key] = value;\n  }\n}\n\n\nfunction RecordBuilder() {\n  this.items = [];\n}\nRecordBuilder.prototype.appendItem = function (item) {\n  if (isField(item)) this.appendFields(item);\n  else this.appendValue(item);\n};\nRecordBuilder.prototype.appendFields = function (fields) {\n  var keys = Object.keys(fields);\n  for (var i = 0, n = keys.length; i < n; i += 1) {\n    var key = keys[i];\n    var value = fields[key];\n    this.appendField(key, value);\n  }\n};\nRecordBuilder.prototype.appendField = function (key, value) {\n  var field = {};\n  if (typeof key === 'string') {\n    field[key] = value;\n    this.items.push(field);\n    Object.defineProperty(this.items, key, {\n      value: value,\n      enumerable: false,\n      configurable: true,\n      writable: true});\n  }\n  else {\n    field.$key = key;\n    field.$value = value;\n    this.items.push(field);\n  }\n};\nRecordBuilder.prototype.appendValue = function (value) {\n  this.items.push(value);\n};\nRecordBuilder.prototype.appendRecord = function (record) {\n  for (var i = 0, n = record.length; i < n; i += 1) {\n    this.appendItem(record[i]);\n  }\n};\nRecordBuilder.prototype.state = function () {\n  return this.items;\n};\n\n\nfunction ValueBuilder() {\n  this.items = null;\n  this.value = null;\n}\nValueBuilder.prototype.appendItem = function (item) {\n  if (isField(item)) this.appendField(item);\n  else this.appendValue(item);\n};\nValueBuilder.prototype.appendFields = function (fields) {\n  var keys = Object.keys(fields);\n  for (var i = 0, n = keys.length; i < n; i += 1) {\n    var key = keys[i];\n    var value = fields[key];\n    this.appendField(key, value);\n  }\n};\nValueBuilder.prototype.appendField = function (key, value) {\n  if (this.items === null) {\n    this.items = [];\n    if (this.value !== null) {\n      this.items.push(this.value);\n      this.value = null;\n    }\n  }\n  var field = {};\n  if (typeof key === 'string') {\n    field[key] = value;\n    this.items.push(field);\n    Object.defineProperty(this.items, key, {\n      value: value,\n      enumerable: false,\n      configurable: true,\n      writable: true});\n  }\n  else {\n    field.$key = key;\n    field.$value = value;\n    this.items.push(field);\n  }\n};\nValueBuilder.prototype.appendValue = function (value) {\n  if (this.items !== null) this.items.push(value);\n  else if (this.value === null) this.value = value;\n  else {\n    this.items = [];\n    this.items.push(this.value);\n    this.value = null;\n    this.items.push(value);\n  }\n};\nValueBuilder.prototype.state = function () {\n  if (this.value !== null) return this.value;\n  else if (this.items !== null) return this.items;\n};\n\n\nfunction StringIterator(string, index) {\n  Object.defineProperty(this, 'string', {value: string || ''});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nStringIterator.prototype.isDone = function () {\n  return false;\n};\nStringIterator.prototype.isEmpty = function () {\n  return this.index >= this.string.length;\n};\nStringIterator.prototype.head = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) return c1; // U+0000..U+D7FF | U+E000..U+FFFF\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      return (((c1 & 0x3FF) << 10) | (c2 & 0x3FF)) + 0x10000;\n    else return 0xFFFD;\n  }\n  else return 0xFFFD;\n};\nStringIterator.prototype.step = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) // U+0000..U+D7FF | U+E000..U+FFFF\n    this.index += 1;\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      this.index += 2;\n    else this.index += 1;\n  }\n  else this.index += 1;\n};\n\nStringIterator.Done = {\n  isDone: function () {\n    return true;\n  },\n  isEmpty: function () {\n    return true;\n  },\n  head: function () {\n    throw 'head of empty iterator';\n  },\n  step: function () {\n    throw 'empty iterator step';\n  }\n};\nStringIterator.Done.prototype = Object.create(StringIterator.prototype);\n\n\nfunction StringIteratee() {}\nStringIteratee.prototype.isCont = function () {\n  return true;\n};\nStringIteratee.prototype.isDone = function () {\n  return false;\n};\nStringIteratee.prototype.isError = function () {\n  return false;\n};\nStringIteratee.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.prototype.run = function (input) {\n  var next = this;\n  while (!input.isEmpty() && next.isCont()) next = next.feed(input);\n  if (input.isEmpty() && !input.isDone() && next.isCont()) next = next.feed(StringIterator.Done);\n  return next;\n};\n\nStringIteratee.Done = function (value) {\n  StringIteratee.call(this);\n  this.value = value;\n};\nStringIteratee.Done.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Done.prototype.constructor = StringIteratee.Done;\nStringIteratee.Done.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Done.prototype.isDone = function () {\n  return true;\n};\nStringIteratee.Done.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Done.prototype.state = function () {\n  return this.value;\n};\n\nStringIteratee.Error = function (error) {\n  StringIteratee.call(this);\n  this.error = error;\n};\nStringIteratee.Error.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Error.prototype.constructor = StringIteratee.Error;\nStringIteratee.Error.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Error.prototype.isError = function () {\n  return true;\n};\nStringIteratee.Error.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Error.prototype.state = function () {\n  throw this.error;\n};\n\nStringIteratee.unexpectedEOF = new StringIteratee.Error('unexpected end of input');\n\n\nfunction StringBuilder(s) {\n  this.string = s || '';\n}\nStringBuilder.prototype.append = function (c) {\n  if ((c >= 0x0000 && c <= 0xD7FF) ||\n      (c >= 0xE000 && c <= 0xFFFF)) { // U+0000..U+D7FF | U+E000..U+FFFF\n    this.string += String.fromCharCode(c);\n  }\n  else if (c >= 0x10000 && c <= 0x10FFFF) { // U+10000..U+10FFFF\n    var u = c - 0x10000;\n    this.string += String.fromCharCode(0xD800 | (u >>> 10), 0xDC00 | (u & 0x3FF));\n  }\n  else { // invalid code point\n    this.string += String.fromCharCode(0xFFFD);\n  }\n};\nStringBuilder.prototype.appendString = function (s) {\n  var cs = new StringIterator(s);\n  while (!cs.isEmpty()) {\n    this.append(cs.head());\n    cs.step();\n  }\n};\nStringBuilder.prototype.state = function () {\n  return this.string;\n};\n\n\nfunction DataBuilder() {\n  Object.defineProperty(this, 'buffer', {value: null, writable: true});\n  Object.defineProperty(this, 'offset', {value: 0, writable: true});\n  Object.defineProperty(this, 'aliased', {value: true, writable: true});\n  Object.defineProperty(this, 'p', {value: 0, writable: true});\n  Object.defineProperty(this, 'q', {value: 0, writable: true});\n  Object.defineProperty(this, 'r', {value: 0, writable: true});\n  Object.defineProperty(this, 's', {value: 0, writable: true});\n}\nDataBuilder.prototype.prepare = function (size) {\n  function expand(base, size) {\n    var n = Math.max(base, size) - 1;\n    n |= n >> 1; n |= n >> 2; n |= n >> 4; n |= n >> 8;\n    return n + 1;\n  }\n  if (this.aliased || size > this.buffer.length) {\n    var array = new Uint8Array(expand(256, size));\n    if (this.buffer) array.set(this.buffer);\n    this.buffer = array;\n    this.aliased = false;\n  }\n};\nDataBuilder.prototype.appendByte = function (value) {\n  this.prepare(this.offset + 1);\n  this.buffer[this.offset] = value;\n  this.offset += 1;\n};\nDataBuilder.prototype.decodeBase64Digit = function (c) {\n  if (c >= 65/*'A'*/ && c <= 90/*'Z'*/) return c - 65/*'A'*/;\n  else if (c >= 97/*'a'*/ && c <= 122/*'z'*/) return c - 71/*'a' - 26*/;\n  else if (c >= 48/*'0'*/ && c <= 57/*'9'*/) return c + 4/*52 - '0'*/;\n  else if (c === 43/*'+'*/ || c === 45/*'-'*/) return 62;\n  else if (c === 47/*'/'*/ || c === 95/*'_'*/) return 63;\n};\nDataBuilder.prototype.decodeBase64Quantum = function () {\n  var x = this.decodeBase64Digit(this.p);\n  var y = this.decodeBase64Digit(this.q);\n  if (this.r !== 61/*'='*/) {\n    var z = this.decodeBase64Digit(this.r);\n    if (this.s !== 61/*'='*/) {\n      var w = this.decodeBase64Digit(this.s);\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n      this.appendByte((z << 6) | w);\n    }\n    else {\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n    }\n  }\n  else {\n    if (this.s !== 61/*'='*/) throw 'incomplete base64 quantum';\n    this.appendByte((x << 2) | (y >>> 4));\n  }\n};\nDataBuilder.prototype.appendBase64Char = function (c) {\n  if (this.p === 0) this.p = c;\n  else if (this.q === 0) this.q = c;\n  else if (this.r === 0) this.r = c;\n  else {\n    this.s = c;\n    this.decodeBase64Quantum();\n    this.s = 0;\n    this.r = 0;\n    this.q = 0;\n    this.p = 0;\n  }\n};\nDataBuilder.prototype.state = function (value) {\n  if (!this.buffer) this.buffer = new Uint8Array(0);\n  else if (this.buffer.length !== this.offset) {\n    var array = new Uint8Array(this.offset);\n    array.set(this.buffer.subarray(0, this.offset));\n    this.buffer = array;\n  }\n  this.aliased = true;\n  return this.buffer;\n};\n\n\nfunction isSpace(c) {\n  return c === 0x20 || c === 0x9;\n}\nfunction isNewline(c) {\n  return c === 0xA || c === 0xD;\n}\nfunction isWhitespace(c) {\n  return isSpace(c) || isNewline(c);\n}\nfunction isNameStartChar(c) {\n  return (\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x2FF ||\n    c >= 0x370 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isNameChar(c) {\n  return (\n    c === 45/*'-'*/ ||\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 0xB7 ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x203F && c <= 0x2040 ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isBase64Char(c) {\n  return (\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 43/*'+'*/ || c === 45/*'-'*/ ||\n    c === 47/*'/'*/ || c === 95/*'_'*/);\n}\n\n\nfunction DocumentParser(value) {\n  StringIteratee.call(this);\n  this.value = value || new BlockParser();\n}\nDocumentParser.prototype = Object.create(StringIteratee.prototype);\nDocumentParser.prototype.constructor = DocumentParser;\nDocumentParser.prototype.feed = function (input) {\n  var value = this.value;\n  while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n  if (value.isError()) return value;\n  if (value.isDone()) {\n    if (!input.isEmpty()) return new StringIteratee.Error({found: input.head()});\n    else if (input.isDone()) return value;\n  }\n  return new DocumentParser(value);\n};\n\n\nfunction BlockParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockParser.prototype = Object.create(StringIteratee.prototype);\nBlockParser.prototype.constructor = BlockParser;\nBlockParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new ValueBuilder();\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 64/*'@'*/ || c === 123/*'{'*/ || c === 91/*'['*/ || isNameStartChar(c) ||\n            c === 34/*'\"'*/ || c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/ || c === 37/*'%'*/)\n          s = 2;\n        else return new StringIteratee.Error({expected: 'block value', found: c});\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 2) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 3;\n      else if (key.isError()) return key;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 4;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 6;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 5;\n      else if (input.isDone()) {\n        builder.appendField(key.state(), null);\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(key.state(), value.state());\n        key = null;\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 1;\n        }\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n  }\n  return new BlockParser(builder, key, value, s);\n};\n\n\nfunction AttrParser(ident, value, s) {\n  StringIteratee.call(this);\n  this.ident = ident || null;\n  this.value = value || new BlockParser();\n  this.s = s || 1;\n}\nAttrParser.prototype = Object.create(StringIteratee.prototype);\nAttrParser.prototype.constructor = AttrParser;\nAttrParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var ident = this.ident;\n  var field;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 64/*'@'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'@\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    if (!ident) ident = new IdentParser(new StringBuilder('@'));\n    ident = ident.feed(input);\n    if (ident.isDone()) s = 3;\n    else if (ident.isError()) return ident;\n  }\n  if (s === 3) {\n    if (!input.isEmpty() && input.head() === 40/*'('*/) {\n      input.step();\n      s = 4;\n    }\n    else if (!input.isEmpty() || input.isDone()) {\n      field = {};\n      field[ident.state()] = null;\n      return new StringIteratee.Done(field);\n    }\n  }\n  if (s === 4) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        field = {};\n        field[ident.state()] = null;\n        return new StringIteratee.Done(field);\n      }\n      else s = 5;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 5) {\n    while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n    if (value.isDone()) s = 6;\n    else if (value.isError()) return value;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        field = {};\n        field[ident.state()] = value.state();\n        return new StringIteratee.Done(field);\n      }\n      else return new StringIteratee.Error({expected: '\\')\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  return new AttrParser(ident, value, s);\n};\n\n\nfunction BlockValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockValueParser.prototype = Object.create(StringIteratee.prototype);\nBlockValueParser.prototype.constructor = BlockValueParser;\nBlockValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          value = new RecordParser(builder);\n          s = 5;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          value = new MarkupParser(builder);\n          s = 5;\n        }\n        else if (isNameStartChar(c)) {\n          value = new IdentParser();\n          s = 4;\n        }\n        else if (c === 34/*'\"'*/) {\n          value = new StringParser();\n          s = 4;\n        }\n        else if (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          value = new NumberParser();\n          s = 4;\n        }\n        else if (c === 37/*'%'*/) {\n          value = new DataParser();\n          s = 4;\n        }\n        else if (!builder) return new StringIteratee.Done(undefined);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(undefined);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendFields(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty() && input.head() === 64/*'@'*/) s = 1;\n      else return new StringIteratee.Done(builder.state());\n    }\n  }\n  return new BlockValueParser(builder, field, value, s);\n};\n\n\nfunction InlineValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nInlineValueParser.prototype = Object.create(StringIteratee.prototype);\nInlineValueParser.prototype.constructor = InlineValueParser;\nInlineValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 64/*'@'*/) {\n        field = new AttrParser();\n        s = 2;\n      }\n      else if (c === 123/*'{'*/) {\n        if (builder) {\n          value = new RecordParser(builder);\n          s = 5;\n        }\n        else {\n          value = new RecordParser();\n          s = 4;\n        }\n      }\n      else if (c === 91/*'['*/) {\n        if (builder) {\n          value = new MarkupParser(builder);\n          s = 5;\n        }\n        else {\n          value = new MarkupParser();\n          s = 4;\n        }\n      }\n      else if (!builder) return new StringIteratee.Done(null);\n      else return new StringIteratee.Done(builder.state());\n    }\n    else if (input.isDone()) {\n      if (!builder) return new StringIteratee.Done(null);\n      else return new StringIteratee.Done(builder.state());\n    }\n  }\n  if (s === 2) {\n    while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n    if (field.isDone()) {\n      builder = builder || new ValueBuilder();\n      builder.appendFields(field.state());\n      field = null;\n      s = 3;\n    }\n    else if (field.isError()) return field;\n  }\n  if (s === 3) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 123/*'{'*/) {\n        value = new RecordParser(builder);\n        s = 5;\n      }\n      else if (c === 91/*'['*/) {\n        value = new MarkupParser(builder);\n        s = 5;\n      }\n      else return new StringIteratee.Done(builder.state());\n    }\n    else if (input.isDone()) return new StringIteratee.Done(builder.state());\n  }\n  if (s === 4) {\n    while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n    if (value.isDone()) {\n      builder = builder || new ValueBuilder();\n      builder.appendValue(value.state());\n      return new StringIteratee.Done(builder.state());\n    }\n    else if (value.isError()) return value;\n  }\n  if (s === 5) {\n    while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n    if (value.isDone()) return new StringIteratee.Done(builder.state());\n    else if (value.isError()) return value;\n  }\n  return new InlineValueParser(builder, field, value, s);\n};\n\n\nfunction RecordParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nRecordParser.prototype = Object.create(StringIteratee.prototype);\nRecordParser.prototype.constructor = RecordParser;\nRecordParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new RecordBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 123/*'{'*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'{\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n        else s = 3;\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 4;\n      else if (key.isError()) return key;\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 5;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 7;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 6;\n      else if (input.isDone()) {\n        builder.appendField(key, null);\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 6) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(key.state(), value.state());\n        key = null;\n        value = null;\n        s = 7;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 7) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 2;\n        }\n        else if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n       else return new StringIteratee.Error({expected: '\\'}\\', \\';\\', \\',\\', or newline', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new RecordParser(builder, key, value, s);\n};\n\n\nfunction MarkupParser(builder, text, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.text = text || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nMarkupParser.prototype = Object.create(StringIteratee.prototype);\nMarkupParser.prototype.constructor = MarkupParser;\nMarkupParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var text = this.text;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 91/*'['*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'[\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(),\n          c !== 64/*'@'*/ &&\n          c !== 91/*'['*/ &&\n          c !== 92/*'\\\\'*/ &&\n          c !== 93/*']'*/ &&\n          c !== 123/*'{'*/ &&\n          c !== 125/*'}'*/)) {\n        input.step();\n        text = text || new StringBuilder();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 93/*']'*/) {\n          input.step();\n          builder = builder || new RecordBuilder();\n          if (text) builder.appendValue(text.state());\n          return new StringIteratee.Done(builder.state());\n        }\n        else if (c === 64/*'@'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new InlineValueParser();\n          s = 3;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new RecordParser(builder);\n          s = 4;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new MarkupParser(builder);\n          s = 4;\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 5;\n        }\n        else new StringIteratee.Error({found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendValue(value.state());\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        text = text || new StringBuilder();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new MarkupParser(builder, text, value, s);\n};\n\n\nfunction IdentParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nIdentParser.prototype = Object.create(StringIteratee.prototype);\nIdentParser.prototype.constructor = IdentParser;\nIdentParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), isNameStartChar(c))) {\n      builder = builder || new StringBuilder();\n      input.step();\n      builder.append(c);\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'identitifer', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    while (!input.isEmpty() && (c = input.head(), isNameChar(c))) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) {\n      var value = builder.state();\n      if (value === 'true') value = true;\n      else if (value === 'false') value = false;\n      return new StringIteratee.Done(value);\n    }\n  }\n  return new IdentParser(builder, s);\n};\n\n\nfunction StringParser(text, s) {\n  StringIteratee.call(this);\n  this.text = text || null;\n  this.s = s || 1;\n}\nStringParser.prototype = Object.create(StringIteratee.prototype);\nStringParser.prototype.constructor = StringParser;\nStringParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var text = this.text;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 34/*'\"'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'\"\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      text = text || new StringBuilder();\n      while (!input.isEmpty() && (c = input.head(), c !== 34/*'\"'*/ && c !== 92/*'\\\\'*/)) {\n        input.step();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 34/*'\"'*/) {\n          input.step();\n          return new StringIteratee.Done(text.state());\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 3;\n        }\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new StringParser(text, s);\n};\n\n\nfunction NumberParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nNumberParser.prototype = Object.create(StringIteratee.prototype);\nNumberParser.prototype.constructor = NumberParser;\nNumberParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder || new StringBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 2;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 48/*'0'*/) {\n        input.step();\n        builder.append(c);\n        s = 4;\n      }\n      else if (c >= 49/*'1'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 3;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 3) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 4;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 4) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 46/*'.'*/) {\n        input.step();\n        builder.append(c);\n        s = 5;\n      }\n      else if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n        input.step();\n        builder.append(c);\n        s = 8;\n      }\n      else return new StringIteratee.Done(Number(builder.state()));\n    }\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 5) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 6;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 7;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 7) {\n    c = input.head();\n    if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n      input.step();\n      builder.append(c);\n      s = 8;\n    }\n    else return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 8) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 43/*'+'*/ || c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 9;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 9) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 10;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 10) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  return new NumberParser(builder, s);\n};\n\n\nfunction DataParser(data, s) {\n  StringIteratee.call(this);\n  this.data = data || null;\n  this.s = s || 1;\n}\nDataParser.prototype = Object.create(StringIteratee.prototype);\nDataParser.prototype.constructor = DataParser;\nDataParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var data = this.data || new DataBuilder();\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 37/*'%'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'%\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 3;\n      }\n      else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(data.state());\n    }\n    if (s === 3) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 4;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 4) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 5;\n        else s = 6;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 5) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 2;\n        else return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    else if (s === 6) {\n      if (!input.isEmpty() && (c = input.head(), c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'=\\'', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new DataParser(data, s);\n};\n\n\nfunction ReconWriter(builder) {\n  Object.defineProperty(this, 'builder', {value: builder || new StringBuilder()});\n}\nReconWriter.prototype.writeValue = function (value) {\n  if (isRecord(value)) this.writeRecord(value);\n  else if (isObject(value)) this.writeRecord(coerceObject(value));\n  else if (typeof value === 'string') this.writeText(value);\n  else if (typeof value === 'number') this.writeNumber(value);\n  else if (typeof value === 'boolean') this.writeBool(value);\n  else if (value instanceof Uint8Array) this.writeData(value);\n};\nReconWriter.prototype.writeItem = function (item) {\n  if (isField(item)) this.writeSlots(item);\n  else this.writeValue(item);\n};\nReconWriter.prototype.writeAttrs = function (attrs) {\n  var keys = Object.keys(attrs);\n  for (var i = 0, n = keys.length; i < n; i += 1) {\n    var key = keys[i];\n    if (key.length > 0 && key.charCodeAt(0) === 64/*'@'*/) {\n      var value = attrs[key];\n      this.writeAttr(key.substring(1), value);\n    }\n  }\n};\nReconWriter.prototype.writeAttr = function (key, value) {\n  this.builder.append(64/*'@'*/);\n  this.writeIdent(key);\n  if (value !== null) {\n    this.builder.append(40/*'('*/);\n    this.writeBlock(value);\n    this.builder.append(41/*')'*/);\n  }\n};\nReconWriter.prototype.writeSlots = function (slots) {\n  var keys = Object.keys(slots);\n  var key;\n  var value;\n  var n = keys.length;\n  if (n === 2 && slots.$key !== undefined && slots.$value !== undefined) {\n    key = slots.$key;\n    value = slots.$value;\n    this.writeSlot(key, value);\n  }\n  else for (var i = 0; i < n; i += 1) {\n    key = keys[i];\n    value = slots[key];\n    if (i > 0) this.builder.append(44/*','*/);\n    this.writeSlot(key, value);\n  }\n};\nReconWriter.prototype.writeSlot = function (key, value) {\n  this.writeValue(key);\n  this.builder.append(58/*':'*/);\n  if (value !== null) this.writeValue(value);\n};\nReconWriter.prototype.writeBlock = function (value) {\n  if (!isObject(value)) this.writeValue(value);\n  else {\n    if (!isRecord(value)) value = coerceObject(value);\n    if (value.length > 0) this.writeItems(value, isBlockSafe(value), false);\n    else {\n      this.builder.append(123/*'{'*/);\n      this.builder.append(125/*'}'*/);\n    }\n  }\n};\nReconWriter.prototype.writeRecord = function (record) {\n  if (record.length > 0) this.writeItems(record, false, false);\n  else {\n    this.builder.append(123/*'{'*/);\n    this.builder.append(125/*'}'*/);\n  }\n};\nReconWriter.prototype.writeItems = function (items, inBlock, inMarkup) {\n  var i = 0;\n  var n = items.length;\n  var inBraces = false;\n  var inBrackets = false;\n  var first = true;\n  while (i < n) {\n    var item = items[i];\n    i += 1;\n    if (inBrackets && isAttr(item)) {\n      if (inBraces) {\n        this.builder.append(125/*'}'*/);\n        inBraces = false;\n      }\n      this.builder.append(93/*']'*/);\n      inBrackets = false;\n    }\n    if (isAttr(item)) {\n      if (inBraces) {\n        this.builder.append(125/*'}'*/);\n        inBraces = false;\n      }\n      else if (inBrackets) {\n        this.builder.append(93/*']'*/);\n        inBrackets = false;\n      }\n      this.writeAttrs(item);\n      first = false;\n    }\n    else if (inBrackets && typeof item === 'string') {\n      if (inBraces) {\n        this.builder.append(125/*'}'*/);\n        inBraces = false;\n      }\n      this.writeMarkupText(item);\n    }\n    else if (inBraces) {\n      if (!first) this.builder.append(44/*','*/);\n      else first = false;\n      this.writeItem(item);\n    }\n    else if (inBrackets) {\n      if (isRecord(item) && isMarkupSafe(item)) {\n        this.writeItems(item, false, true);\n        if (i < n && typeof items[i] === 'string') {\n          this.writeMarkupText(items[i]);\n          i += 1;\n        }\n        else if (i < n && !isAttr(items[i])) {\n          this.builder.append(123/*'{'*/);\n          inBraces = true;\n          first = true;\n        }\n        else {\n          this.builder.append(93/*']'*/);\n          inBrackets = false;\n        }\n      }\n      else {\n        this.builder.append(123/*'{'*/);\n        this.writeItem(item);\n        inBraces = true;\n        first = false;\n      }\n    }\n    else if (typeof item === 'string' &&\n        i < n && !isField(items[i]) &&\n        typeof items[i] !== 'string' && typeof items[i] !== 'boolean') {\n      this.builder.append(91/*'['*/);\n      this.writeMarkupText(item);\n      inBrackets = true;\n    }\n    else if (inBlock && !inBraces) {\n      if (!first) this.builder.append(44/*','*/);\n      else first = false;\n      this.writeItem(item);\n    }\n    else if (inMarkup && typeof item === 'string' && i >= n) {\n      this.builder.append(91/*'['*/);\n      this.writeMarkupText(item);\n      this.builder.append(93/*']'*/);\n    }\n    else if (!inMarkup && !isField(item) && !isRecord(item) &&\n            (!first && i >= n || i < n && isAttr(items[i]))) {\n      if (!first && (typeof item === 'string' && this.isIdent(item) ||\n                     typeof item === 'number' ||\n                     typeof item === 'boolean'))\n        this.builder.append(32/*' '*/);\n      this.writeValue(item);\n    }\n    else {\n      this.builder.append(123/*'{'*/);\n      this.writeItem(item);\n      inBraces = true;\n      first = false;\n    }\n  }\n  if (inBraces) this.builder.append(125/*'}'*/);\n  else if (inBrackets) this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.isIdent = function (text) {\n  var cs = new StringIterator(text);\n  if (cs.isEmpty() || !isNameStartChar(cs.head())) return false;\n  cs.step();\n  while (!cs.isEmpty() && isNameChar(cs.head())) cs.step();\n  return cs.isEmpty();\n};\nReconWriter.prototype.writeText = function (text) {\n  if (this.isIdent(text)) this.writeIdent(text);\n  else this.writeString(text);\n};\nReconWriter.prototype.writeIdent = function (ident) {\n  this.builder.appendString(ident);\n};\nReconWriter.prototype.writeString = function (string) {\n  var cs = new StringIterator(string);\n  this.builder.append(34/*'\"'*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 34/*'\"'*/:\n      case 92/*'\\\\'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      case 8/*'\\b'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(98/*'b'*/); break;\n      case 12/*'\\f'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(102/*'f'*/); break;\n      case 10/*'\\n'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(110/*'n'*/); break;\n      case 13/*'\\r'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(114/*'r'*/); break;\n      case 9/*'\\t'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(116/*'t'*/); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(34/*'\"'*/);\n};\nReconWriter.prototype.writeMarkupText = function (text) {\n  var cs = new StringIterator(text);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 64/*'@'*/:\n      case 91/*'['*/:\n      case 92/*'\\\\'*/:\n      case 93/*']'*/:\n      case 123/*'{'*/:\n      case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n};\nReconWriter.prototype.writeNumber = function (number) {\n  this.builder.appendString(number.toString());\n};\nReconWriter.prototype.writeBool = function (bool) {\n  this.builder.appendString(bool.toString());\n};\nReconWriter.prototype.writeData = function (data) {\n  function encodeBase64Digit(x) {\n    if (x >= 0 && x < 26) return x + 65/*'A'*/;\n    else if (x >= 26 && x < 52) return x + 71/*('a' - 26)*/;\n    else if (x >= 52 && x < 62) return x - 4/*-('0' - 52)*/;\n    else if (x === 62) return 43/*'+'*/;\n    else if (x === 63) return 47/*'/'*/;\n  }\n  this.builder.append(37/*'%'*/);\n  var i = 0;\n  var n = data.length;\n  var x, y, z;\n  while (i + 2 < n) {\n    x = data[i];\n    y = data[i + 1];\n    z = data[i + 2];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit(((y << 2) | (z >>> 6)) & 0x3F));\n    this.builder.append(encodeBase64Digit(z & 0x3F));\n    i += 3;\n  }\n  if (i + 1 < n) {\n    x = data[i];\n    y = data[i + 1];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit((y << 2) & 0x3F));\n    this.builder.append(61/*'='*/);\n    i += 2;\n  }\n  else if (i < n) {\n    x = data[i];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit((x << 4) & 0x3F));\n    this.builder.append(61/*'='*/);\n    this.builder.append(61/*'='*/);\n    i += 1;\n  }\n};\nReconWriter.prototype.state = function () {\n  return this.builder.state();\n};\n\n\nmodule.exports = function (value) {\n  return coerce.apply(null, arguments);\n};\nexports = module.exports;\nexports.parse = parse;\nexports.stringify = stringify;\nexports.base64 = base64;\nexports.get = get;\nexports.set = set;\nexports.concat = concat;\nexports.equal = equal;\n\n},{}]},{},[1])(1)\n});"],"sourceRoot":"/source/"}